<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Roja AI Chat</title>
<style>
Â  @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600&family=Inter:wght@400;500;600&display=swap');
Â  * { box-sizing: border-box; }
Â  body { font-family: 'Inter', 'Poppins', sans-serif; margin: 0; background-color: #0a0f24; color: #fff; display: flex; flex-direction: column; min-height: 100vh; }
Â  .chat-header { display: flex; align-items: center; justify-content: space-between; padding: 12px 18px; background: linear-gradient(135deg, #111831, #1c244a); border-bottom: 1px solid #2a2f4a; position: fixed; top: 0; left: 0; right: 0; z-index: 10; box-shadow: 0 2px 10px rgba(0,0,0,0.4); }
Â  .chat-header-left { display: flex; align-items: center; }
Â  .chat-header img { width:48px; height:48px; border-radius:50%; object-fit:cover; margin-right:10px; border:2px solid #0078ff; }
Â  .chat-header h2 { margin:0; font-size:20px; font-weight:600; }
Â  .chat-header-right button { background:#1f2745; border:none; color:#bbb; font-size:14px; padding:6px 10px; border-radius:6px; cursor:pointer; transition:0.3s; }
Â  .chat-header-right button:hover { color:#fff; background:#0078ff; }
Â  .chat-box { flex:1; overflow-y:auto; scroll-behavior:smooth; display:flex; flex-direction:column; padding:15px; margin-top:75px; margin-bottom:80px; }
Â  .message { margin:10px 0; max-width:75%; padding:14px 18px; border-radius:14px; line-height:1.6; word-wrap:break-word; position:relative; font-size:15px; }
Â  .user { background:#0078ff; align-self:flex-end; border-bottom-right-radius:0; margin-right:5px; animation:bubbleRight 0.35s ease; }
Â  .bot { background:#1b2140; align-self:flex-start; border-bottom-left-radius:0; margin-left:5px; animation:bubbleLeft 0.35s ease; font-family: 'Inter', sans-serif; }
Â  .bot p { margin:6px 0; line-height:1.6; }
Â  .bot pre, .bot code { display: block; background: #111831; border-radius: 8px; padding: 8px 10px; margin-top: 6px; white-space: pre-wrap; word-wrap: break-word; font-family: 'JetBrains Mono', monospace; font-size: 14px; color: #00d4ff; }
Â  .typing-indicator { display:flex; align-items:center; gap:3px; }
Â  .typing-indicator span { width:6px; height:6px; background:#0078ff; border-radius:50%; display:inline-block; animation:bounce 0.6s infinite alternate; }
Â  .typing-indicator span:nth-child(2) { animation-delay:0.2s; }
Â  .typing-indicator span:nth-child(3) { animation-delay:0.4s; }
Â  @keyframes bounce { to { transform: translateY(-5px); } }
Â  @keyframes bubbleLeft { 0% { transform: scale(0.8) translateX(-10px); opacity: 0; } 60% { transform: scale(1.05) translateX(3px); opacity: 1; } 100% { transform: scale(1) translateX(0); opacity: 1; } }
Â  @keyframes bubbleRight { 0% { transform: scale(0.8) translateX(10px); opacity: 0; } 60% { transform: scale(1.05) translateX(-3px); opacity: 1; } 100% { transform: scale(1) translateX(0); opacity: 1; } }
Â  .copy-btn { position:absolute; bottom:8px; right:8px; background:#0078ff; color:white; border:none; font-size:12px; padding:4px 8px; border-radius:5px; cursor:pointer; opacity:0; transition:0.2s; }
Â  .bot:hover .copy-btn { opacity:1; }
Â  .copy-btn:hover { background:#005ec3; }
Â  .chat-input { position:fixed; bottom:0; left:0; right:0; display:flex; padding:12px; background:#141a35; border-top:1px solid #2a2f4a; z-index:20; }
Â  .chat-input input { flex:1; padding:10px 14px; border:none; border-radius:8px; font-size:15px; outline:none; background:#1f2745; color:#fff; }
Â  .chat-input button { background:#0078ff; color:#fff; border:none; padding:10px 18px; margin-left:10px; border-radius:8px; cursor:pointer; transition:0.2s; }
Â  .chat-input button:hover { background:#0060d4; }
Â  .footer { text-align:center; padding:8px; font-size:12px; color:#aaa; font-style:italic; position:fixed; bottom:60px; left:0; right:0; background:transparent; }
Â  #chatHistoryPanel { position:fixed; top:75px; right:-320px; width:300px; height:calc(100% - 75px); background:#141a35; border-left:1px solid #2a2f4a; overflow-y:auto; transition:0.3s; padding:10px; z-index:15; }
Â  #chatHistoryPanel h3 { color:#fff; font-size:16px; margin-bottom:10px; }
Â  #openHistoryBtn { position:fixed; top:85px; right:10px; z-index:20; padding:6px 10px; border:none; background:#1f2745; color:#fff; border-radius:6px; cursor:pointer; }
Â  .preview-img { max-width: 200px; border-radius: 10px; margin-top: 8px; }
</style>
</head>
<body>

<div class="chat-header">
Â  <div class="chat-header-left">
Â  Â  <img src="roja-avatar.png" alt="Roja AI Avatar">
Â  Â  <h2>Roja AI</h2>
Â  </div>
Â  <div class="chat-header-right">
Â  Â  <button onclick="newChat()">Percakapan Baru</button>
Â  Â  <button onclick="toggleFullscreen()">Fullscreen</button>
Â  </div>
</div>

<div class="chat-box" id="chatBox"></div>

<div class="chat-input">
Â  <input id="userInput" type="text" placeholder="Ketik pesan..." />
Â  <button onclick="sendMessage()">Kirim</button>
Â  <input type="file" id="imageUpload" accept="image/*" style="display:none">
Â  <button onclick="document.getElementById('imageUpload').click()">ğŸ“</button>
</div>

<div class="footer">copyright@RojaServer | V2</div>

<div id="chatHistoryPanel">
Â  <h3>Riwayat Chat</h3>
Â  <ul id="chatHistoryList"></ul>
Â  <button onclick="closeHistory()">Tutup</button>
</div>
<button id="openHistoryBtn">Riwayat</button>

<script>
const chatBox = document.getElementById('chatBox');
const input = document.getElementById('userInput');
const imageUpload = document.getElementById('imageUpload');

const GEMINI_API_KEY = "AIzaSyC310duBltZgbkMMfqRoAn6qVELo7x2slI";
const GEMINI_URL = "https://generativelanguage.googleapis.com/v1beta/models/gemini-1.5-flash:generateContent";

window.onload = () => {
Â  const saved = localStorage.getItem('roja_chat');
Â  if (saved) chatBox.innerHTML = saved;
Â  else appendBot("<p>Halo, aku <b>Roja AI</b> ğŸ¤–<br>Ada yang bisa aku bantu hari ini?</p>");
Â  chatBox.scrollTop = chatBox.scrollHeight;
};

async function sendMessage(msg = null, imageData = null) {
Â  const message = msg || input.value.trim();
Â  if (!message && !imageData) return;

Â  if (message) appendUser(message);
Â  input.value = "";
Â  const typingDiv = appendBot("", true);

Â  try {
Â  Â  const body = {
Â  Â  Â  contents: [
Â  Â  Â  Â  { parts: imageData
Â  Â  Â  Â  Â  Â  ? [{ text: message || "Analisis gambar ini" }, { inlineData: { mimeType: "image/jpeg", data: imageData } }]
Â  Â  Â  Â  Â  Â  : [{ text: message }]
Â  Â  Â  Â  }
Â  Â  Â  ]
Â  Â  };

Â  Â  const res = await fetch(`${GEMINI_URL}?key=${GEMINI_API_KEY}`, {
Â  Â  Â  method: "POST",
Â  Â  Â  headers: { "Content-Type": "application/json" },
Â  Â  Â  body: JSON.stringify(body)
Â  Â  });

Â  Â  const data = await res.json();
Â  Â  const reply = data?.candidates?.[0]?.content?.parts?.[0]?.text || "âš ï¸ Tidak ada respons dari AI.";
Â  Â  typingDiv.innerHTML = `<p>${reply.replace(/\n/g, "<br>")}</p><button class='copy-btn' onclick='copyText(this)'>Copy</button>`;
Â  } catch (e) {
Â  Â  typingDiv.innerHTML = "<p>âŒ Gagal menghubungi AI. Periksa koneksi atau API key kamu.</p>";
Â  }

Â  chatBox.scrollTop = chatBox.scrollHeight;
Â  localStorage.setItem('roja_chat', chatBox.innerHTML);
}

imageUpload.addEventListener("change", () => {
Â  const file = imageUpload.files[0];
Â  if (!file) return;
Â  const reader = new FileReader();
Â  reader.onload = e => {
Â  Â  const base64 = e.target.result.split(",")[1];
Â  Â  appendUser(`<img src="${e.target.result}" class="preview-img"><br><i>ğŸ“· Menganalisis gambar...</i>`);
Â  Â  sendMessage("Analisis gambar ini", base64);
Â  };
Â  reader.readAsDataURL(file);
});

function appendUser(text) {
Â  const div = document.createElement("div");
Â  div.className = "message user";
Â  div.innerHTML = text;
Â  chatBox.appendChild(div);
Â  chatBox.scrollTop = chatBox.scrollHeight;
}
function appendBot(text, typing=false) {
Â  const div = document.createElement("div");
Â  div.className = "message bot";
Â  div.innerHTML = typing ? "<div class='typing-indicator'><span></span><span></span><span></span></div>" : text;
Â  chatBox.appendChild(div);
Â  chatBox.scrollTop = chatBox.scrollHeight;
Â  return div;
}
function copyText(btn) {
Â  const text = btn.parentElement.innerText.replace("Copy", "").trim();
Â  navigator.clipboard.writeText(text);
Â  btn.textContent = "âœ… Disalin";
Â  setTimeout(()=>btn.textContent="Copy",2000);
}
function newChat() {
Â  if (confirm("Mulai percakapan baru?")) {
Â  Â  chatBox.innerHTML = "";
Â  Â  appendBot("<p>Percakapan baru dimulai.<br>Halo, aku <b>Roja AI</b> ğŸ¤–</p>");
Â  Â  localStorage.setItem('roja_chat', chatBox.innerHTML);
Â  }
}
function
 toggleFullscreen() {
Â  if (!document.fullscreenElement) document.documentElement.requestFullscreen();
Â  else document.exitFullscreen();
}
</script>
</body>
</html>
