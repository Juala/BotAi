<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Roja AI Chat</title>

<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap" rel="stylesheet">
<script src="https://unpkg.com/lucide@latest"></script>

<style>
  * { box-sizing: border-box; margin: 0; padding: 0; }
  body {
    font-family: 'Poppins', sans-serif;
    background: linear-gradient(135deg, #0f172a, #1e293b);
    color: #fff;
    height: 100vh;
    overflow: hidden;
    display: flex;
    justify-content: center;
    align-items: center;
  }

  /* === LOGIN PAGE === */
  #loginPage {
    background: rgba(255,255,255,0.05);
    border: 1px solid rgba(255,255,255,0.1);
    border-radius: 16px;
    padding: 30px 25px;
    width: 90%;
    max-width: 350px;
    text-align: center;
    box-shadow: 0 0 20px rgba(0,0,0,0.4);
    backdrop-filter: blur(10px);
  }
  #loginPage h2 {
    margin-bottom: 20px;
    font-weight: 600;
    font-size: 1.3rem;
  }
  #loginPage input {
    width: 100%;
    padding: 10px;
    border: none;
    border-radius: 8px;
    background: rgba(255,255,255,0.1);
    color: #fff;
    font-size: 1rem;
    margin-bottom: 12px;
    outline: none;
  }
  #loginPage button {
    width: 100%;
    background: #3b82f6;
    border: none;
    border-radius: 8px;
    padding: 10px;
    color: #fff;
    font-weight: 600;
    cursor: pointer;
    transition: 0.3s;
  }
  #loginPage button:hover {
    background: #2563eb;
  }
  .guest {
    background: transparent;
    border: 1px solid #3b82f6;
    color: #3b82f6;
    margin-top: 10px;
  }
  .guest:hover {
    background: #3b82f6;
    color: white;
  }

  /* === CHAT PAGE === */
  #chatPage {
    display: none;
    flex-direction: column;
    height: 100vh;
    width: 100%;
  }

  header {
    background: rgba(255,255,255,0.05);
    backdrop-filter: blur(10px);
    padding: 10px 15px;
    display: flex;
    justify-content: space-between;
    align-items: center;
    font-weight: 600;
    border-bottom: 1px solid rgba(255,255,255,0.1);
  }
  #userName {
    font-size: 0.9rem;
    opacity: 0.8;
  }

  #chatBox {
    flex: 1;
    overflow-y: auto;
    padding: 15px;
    scroll-behavior: smooth;
    display: flex;
    flex-direction: column;
  }

  .message {
    max-width: 80%;
    padding: 10px 15px;
    border-radius: 12px;
    margin-bottom: 10px;
    position: relative;
  }

  .user {
    background: #2563eb;
    align-self: flex-end;
    border-bottom-right-radius: 0;
  }

  .bot {
    background: rgba(255,255,255,0.1);
    align-self: flex-start;
    border-bottom-left-radius: 0;
  }

  footer {
    display: flex;
    padding: 10px;
    background: rgba(0,0,0,0.4);
    border-top: 1px solid rgba(255,255,255,0.1);
  }

  input {
    flex: 1;
    padding: 10px;
    border-radius: 8px;
    border: none;
    outline: none;
    background: rgba(255,255,255,0.1);
    color: #fff;
  }

  button {
    background: #3b82f6;
    border: none;
    border-radius: 8px;
    margin-left: 10px;
    padding: 0 15px;
    cursor: pointer;
    transition: 0.3s;
    color: white;
    font-weight: 600;
  }

  button:hover {
    background: #2563eb;
  }

  .copy-btn {
    position: absolute;
    right: 8px;
    top: 8px;
    background: rgba(255,255,255,0.1);
    border: none;
    color: #ccc;
    cursor: pointer;
    font-size: 0.8rem;
    border-radius: 5px;
    padding: 2px 6px;
  }

  small {
    text-align: center;
    color: #aaa;
    font-size: 0.8rem;
    padding: 5px;
  }
</style>
</head>
<body>

  <!-- LOGIN PAGE -->
  <div id="loginPage">
    <h2>üîê Masuk ke Roja AI</h2>
    <input id="emailInput" type="email" placeholder="Masukkan email kamu..." />
    <button onclick="login()">Masuk</button>
    <button class="guest" onclick="guestMode()">Masuk sebagai Guest</button>
  </div>

  <!-- CHAT PAGE -->
  <div id="chatPage">
    <header>
      <div>ü§ñ Roja AI Chat</div>
      <div id="userName"></div>
      <button onclick="logout()">Keluar</button>
    </header>

    <div id="chatBox"></div>

    <footer>
      <input id="userInput" type="text" placeholder="Ketik pesan..." />
      <button onclick="sendMessage()"><i data-lucide="send"></i></button>
    </footer>

    <small>¬© 2025 RojaServer | V2</small>
  </div>

<script>
  lucide.createIcons();
  const chatBox = document.getElementById('chatBox');
  const input = document.getElementById('userInput');
  const loginPage = document.getElementById('loginPage');
  const chatPage = document.getElementById('chatPage');
  const userName = document.getElementById('userName');

  let currentUser = localStorage.getItem("roja_user");

  // === CEK LOGIN ===
  window.onload = () => {
    if (currentUser) {
      openChat(currentUser);
    }
  };

  function login() {
    const email = document.getElementById("emailInput").value.trim();
    if (!email) return alert("Masukkan email terlebih dahulu!");
    localStorage.setItem("roja_user", email);
    openChat(email);
  }

  function guestMode() {
    const guestId = "Guest_" + Math.floor(Math.random() * 9999);
    localStorage.setItem("roja_user", guestId);
    openChat(guestId);
  }

  function logout() {
    if (confirm("Yakin mau keluar?")) {
      localStorage.removeItem("roja_user");
      localStorage.removeItem(`roja_chat_${currentUser}`);
      location.reload();
    }
  }

  // === BUKA CHAT ===
  function openChat(user) {
    currentUser = user;
    userName.textContent = `üë§ ${user}`;
    loginPage.style.display = "none";
    chatPage.style.display = "flex";

    const saved = localStorage.getItem(`roja_chat_${user}`);
    if (saved) chatBox.innerHTML = saved;
    else appendBot("Halo " + user + "! Aku Roja AI ü§ñ Siap membantu kamu hari ini!");

    chatBox.scrollTop = chatBox.scrollHeight;
  }

  // === SIMPAN CHAT ===
  function saveChat() {
    localStorage.setItem(`roja_chat_${currentUser}`, chatBox.innerHTML);
  }

  // === KIRIM PESAN ===
  function sendMessage() {
    const msg = input.value.trim();
    if (!msg) return;
    appendUser(msg);
    input.value = "";
    fakeBotResponse(msg);
  }

  function appendUser(text) {
    const div = document.createElement("div");
    div.className = "message user";
    div.innerText = text;
    chatBox.appendChild(div);
    saveChat();
    chatBox.scrollTop = chatBox.scrollHeight;
  }

  function appendBot(text) {
    const div = document.createElement("div");
    div.className = "message bot";
    div.innerHTML = text.replace(/\n/g, "<br>");

    const copyBtn = document.createElement("button");
    copyBtn.className = "copy-btn";
    copyBtn.innerText = "Copy";
    copyBtn.onclick = () => {
      navigator.clipboard.writeText(div.innerText);
      copyBtn.innerText = "Copied!";
      setTimeout(() => copyBtn.innerText = "Copy", 1500);
    };
    div.appendChild(copyBtn);

    chatBox.appendChild(div);
    saveChat();
    chatBox.scrollTop = chatBox.scrollHeight;
  }

  // === SIMULASI AI ===
  function fakeBotResponse(msg) {
    const botMsg = document.createElement("div");
    botMsg.className = "message bot";
    botMsg.innerText = "‚è≥ Roja AI sedang mengetik...";
    chatBox.appendChild(botMsg);
    chatBox.scrollTop = chatBox.scrollHeight;

    setTimeout(() => {
      botMsg.remove();
      appendBot(`Halo ${currentUser}, kamu menanyakan: <b>${msg}</b><br><br>Roja AI akan segera menambah fitur baru yang lebih keren! ‚ö°`);
    }, 900);
  }
</script>
</body>
</html>
